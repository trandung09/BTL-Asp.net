@model Sp

@{
    ViewBag.Title = "Admin - Sửa sản phẩm";
    Layout = "~/Areas/Admin/Views/Shared/_Layout.cshtml";
}

<h2>Sửa sản phẩm</h2>

@using (Html.BeginForm())
{
    @Html.AntiForgeryToken()

    <div class="form-horizontal">
        @Html.HiddenFor(model => model.Ma)

        <div class="form-group">
            <label class="control-label col-md-2" for="Ten">Tên sản phẩm</label>
            <div class="col-md-10">
                @Html.TextBoxFor(model => model.Ten, new { @class = "form-control", placeholder = "Nhập tên sản phẩm", required = "required" })
            </div>
        </div>

        <div class="form-group">
            <label class="control-label col-md-2" for="MoTa">Mô tả sản phẩm</label>
            <div class="col-md-10">
                @Html.TextAreaFor(model => model.MoTa, new { @class = "form-control", @rows = "4" })
                <script type="text/javascript">
                    CKEDITOR.replace("MoTa");
                </script>
            </div>
        </div>

        <div class="form-group">
            <label class="control-label col-md-2" for="maloai">Mã loại</label>
            <div class="col-md-10">
                @Html.DropDownList("MaLoai", (SelectList) ViewBag.MaLoai, new { @class = "form-control" })
            </div>
        </div>

        <div class="form-group">
            <label class="control-label col-md-2" for="AnhNho">Ảnh đại diện</label>
            <div class="col-md-10">
                <div class="input-group">
                    @Html.TextBoxFor(model => model.AnhNho, new { @class = "form-control", id = "AnhNho" })
                    <span class="input-group-btn">
                        <button class="btn btn-default" type="button" id="browse">Browse</button>
                    </span>
                </div>
                <img src="@Model.AnhNho" id="anhdaidien" width="50" height="50" style="margin-top: 10px;" />
            </div>
        </div>

        <script type="text/javascript">
            $("#browse").click(function () {
                var finder = new CKFinder();
                finder.selectActionFunction = function (fileUrl) {
                    $("#AnhNho").val(fileUrl);
                    $("#anhdaidien").attr("src", fileUrl);
                }
                finder.popup();
            });
        </script>

        @* Tạo một hàm chung cho các trường ảnh *@
        @for (int i = 1; i <= 3; i++)
        {
            <div class="form-group">
                <label class="control-label col-md-2" for="Anh@(i)">Ảnh @(i)</label>
                <div class="col-md-10">
                    <div class="input-group">
                        @Html.TextBoxFor(model => model.GetType().GetProperty($"Anh{i}").GetValue(Model), new { @class = "form-control", id = $"Anh{i}" })
                        <span class="input-group-btn">
                            <button class="btn btn-default" type="button" id="browse@(i)">Browse</button>
                        </span>
                    </div>
                    <img src="@Model.GetType().GetProperty($"Anh{i}").GetValue(Model)" id="anhdd@(i)" width="50" height="50" style="margin-top: 10px;" />
                </div>
            </div>

            <script type="text/javascript">
                $("#browse@(i)").click(function () {
                    var finder = new CKFinder();
                    finder.selectActionFunction = function (fileUrl) {
                        $("#Anh@(i)").val(fileUrl);
                        $("#anhdd@(i)").attr("src", fileUrl);
                    }
                    finder.popup();
                });
            </script>
        }

        <div class="form-group">
            <label class="control-label col-md-2" for="Tskt">Thông số kỹ thuật</label>
            <div class="col-md-10">
                @Html.TextAreaFor(model => model.Tskt, new { @class = "form-control", @rows = "4" })
                <script type="text/javascript">
                    CKEDITOR.replace("Tskt");
                </script>
            </div>
        </div>

        <div class="form-group">
            <label class="control-label col-md-2">Tiêu biểu</label>
            <div class="col-md-10">
                @Html.CheckBoxFor(model => model.TieuBieu ?? false)
            </div>
        </div>

        <div class="form-group">
            <label class="control-label col-md-2">Trạng thái</label>
            <div class="col-md-10">
                @Html.CheckBoxFor(model => model.TrangThai ?? false)
            </div>
        </div>

        <div class="form-group">
            <label class="control-label col-md-2">Xoá</label>
            <div class="col-md-10">
                @Html.CheckBoxFor(model => model.Xoa ?? false)
            </div>
        </div>

        <div class="form-group">
            <label class="control-label col-md-2" for="Hang">Hãng sản xuất</label>
            <div class="col-md-10">
                @Html.TextBoxFor(model => model.Hang, new { @class = "form-control", placeholder = "Nhập hãng sản xuất", required = "required" })
            </div>
        </div>

        <div class="form-group">
            <label class="control-label col-md-2" for="Gia">Giá</label>
            <div class="col-md-10">
                @Html.TextBoxFor(model => model.Gia, new { @class = "form-control", placeholder = "Nhập giá" })
            </div>
        </div>

        <div class="form-group">
            <label class="control-label col-md-2" for="KhuyenMai">Khuyến mại</label>
            <div class="col-md-10">
                @Html.TextBoxFor(model => model.KhuyenMai, new { @class = "form-control", placeholder = "Nhập khuyến mại" })
            </div>
        </div>

        <div class="form-group">
            <label class="control-label col-md-2" for="NgayDang">Ngày đăng</label>
            <div class="col-md-10">
                @Html.TextBoxFor(model => model.NgayDang, new { @class = "form-control", type = "date", required = "required" })
            </div>
        </div>

        <div class="form-group">
            <label class="control-label col-md-2" for="Dvt">Đơn vị tính</label>
            <div class="col-md-10">
                @Html.TextBoxFor(model => model.Dvt, new { @class = "form-control", placeholder = "Nhập đơn vị tính" })
            </div>
        </div>

        <div class="form-group">
            <div class="col-md-offset-2 col-md-10">
                <input type="submit" value="Lưu" class="btn btn-success" />
            </div>
        </div>
    </div>
}

<div>
    <a asp-area="Admin" asp-action="Index" asp-controller="Product" class="btn btn-secondary">Trở về danh sách</a>
</div>
